(function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("d3-selection"),require("d3-drag"),require("d3-scale"),require("d3-transition")):"function"==typeof define&&define.amd?define(["exports","d3-selection","d3-drag","d3-scale","d3-transition"],e):e(t.d3=t.d3||{},t.d3,t.d3,t.d3,t.d3)})(this,function(t,e,r,n){"use strict";function i(t){return this.config=s,this.attr("selection",t),this}var a,o={mergeRecursive:function d(t,e){var r;for(r in e)t[r]instanceof Object?d(t[r],e[r]):t[r]=e[r]},isObject:function(t){return"object"==typeof t},clone:function(){return this.parentNode.appendChild(this.cloneNode(!0))},toPrecision:function(t,e){var r=Math.pow(10,e);return Math.round(t*r)/r}},s={animate:250,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,width:600,height:14,orientation:"horizontal",range:!1,step:50,value:0,values:null,handle:{x:70,width:40,minWidth:40},buttons:{width:14},bar:{margin:{left:5,right:5,top:0,bottom:0}},goti:{width:20,path:function(t,e){var r=t.attr("handle"),n=Math.min(t.attr("goti").width,r.minWidth),i=r.x+e/2,a=t.attr("height"),o=a/2,s="";return n>=e&&(i=r.x+r.minWidth/2),s+="M"+i+","+(o-a/4)+"L"+i+","+(o+a/4),s+="M"+(i-n/6)+","+(o-a/4)+"L"+(i-n/6)+","+(o+a/4),s+="M"+(i+n/6)+","+(o-a/4)+"L"+(i+n/6)+","+(o+a/4)}},margin:{left:0,right:0,top:0,bottom:0},change:null,slide:null,start:null,stop:null},l=",",h=o.toPrecision;i.prototype.attr=function(t,e){return e===a?this.config[t]:(this.config[t]=e,this)},i.prototype.drawSelf=function(t){function i(t){var e=s.attr("width")/2,r=A(Math.max(k[0]+e,Math.min(t,k[1]-e))-e);return r}function a(t,e,r){x=t,s.transition().duration(e?!1:m).tween("abc",function(){var t=+s.attr("width");return function(e){var n,a;r?(a=1>e?t+(r-t)*e:r,a=Math.max(a,b.minWidth),n+a>k[1]&&(a=k[1]-n),s.attr("width",h(a,1))):r=s.attr("width"),n=i(1!==e?w+e*(x-w):w=x),s.attr("x",h(c.attr("handle").x=n,1)),l.attr("d",c.attr("goti").path.call(l,c,h(r,1)))}})}var s,l,c=this,d=this.attr("selection"),u=this.attr("buttons"),p=this.attr("margin"),f=+this.attr("width")-p.left-p.right,g=this.attr("bar").margin,w=0,v=[1],m=this.attr("animate"),y=this.attr("height"),b=this.attr("handle"),x=b.x+b.width/2,k=[p.left+u.width+g.left,f-u.width-g.right],A=n.scaleLinear().domain(k).range(k),M=d.classed("slider",!0).attr("transform",this.attr("transform")),j=M.selectAll(".track").data(v),O=0;return j.enter().append("rect").attr("class","track").select(o.clone).attr("class","track-inset").select(o.clone).attr("class","track-overlay").call(r.drag().on("start.interrupt",function(){M.interrupt()}).on("start drag",function(){var t=A.invert(e.event.x),r=c.attr("handle");if("start"===e.event.type){if(t>r.x&&t<r.x+r.width)return void(O=r.x+r.width/2-t);O=0}"start"===e.event.type&&(t<r.x||t>r.x+r.width)||c.emit("slide",t+O)})),M.selectAll(".track, .track-inset, .track-overlay").attr("x",A.range()[0]).attr("y",0).attr("width",A.range()[1]-A.range()[0]).attr("height",y),M.selectAll(".handle").data([1]).enter().insert("rect",".track-overlay").attr("class","handle"),s=M.selectAll(".handle").attr("width",b.width).attr("height",y).attr("x",u.width+g.left+p.left),l=M.selectAll(".goti"),l.data([1]).enter().insert("path",".track-overlay").classed("goti",!0).style("stroke","#000"),l=M.selectAll(".goti"),this.update=function(t,e,r,n){n&&(c.attr("handle").minWidth=n),a((t+e)/2,r,e-t),c.attr("handle").width=e-t,c.emit("change")},a(x,t),this},i.prototype.draw=function(t){return this.drawSelf(t).drawButtons(t)},i.prototype.drawButtons=function(t){var r,n=this,i=this.attr("selection"),a=this.attr("height"),o=this.attr("buttons").width,s=this.attr("width"),h=this.attr("margin"),c=h.left,d=this.attr("animate"),u=function(t,e){return"translate("+t+l+e+")"};return i.selectAll(".buttonGroup").data([1]).enter().append("g").classed("buttonGroup",!0).selectAll("g").data([0,1]).enter().append("g").attr("class",function(t,e){return e?"rightButton":"leftButton"}).on("click",function(t,e){var r=n.attr("handle"),i=r.x+(e?1:-1)*n.attr("step");n.emit("slide",i+r.width/2)}),i=i.selectAll(".buttonGroup g"),t&&(i=i.transition().duration(d)),i.attr("transform",function(t,e){return e?u(s-h.right-o,0):u(2*c,0)}).each(function(t,n){var i=e.select(this),s=i.selectAll("rect").data([1]);s.enter().append("rect").classed("bg",!0).merge(s).attr("x",-c).attr("y",0).attr("width",o).attr("height",a).attr("r",1),r=i.selectAll("path").data([1]),r.enter().append("path").classed("arrows",!0).merge(r).attr("d",function(){return"M"+((o-2*c)/2+(n?-1:1))+l+(a/2-3)+"L"+((o-2*c)/2+(n?-1:1))+l+(a/2+3)+"L"+((o-2*c)/2+(n?2:-2))+l+a/2+"Z"})}),this},i.prototype.destroy=function(){},i.prototype.disable=function(){},i.prototype.enable=function(){},i.prototype.option=function(){},i.prototype.change=function(){},i.prototype.create=function(){},i.prototype.slide=function(){},i.prototype.start=function(){},i.prototype.stop=function(){},i.prototype.emit=function(t,e){var r,n,i=this.getEvents(t)||[],a=this.attr("selection");for(r=0,n=i.length;n>r;r+=1)a.call(i[r],this,e);return this},i.prototype.getEvents=function(t){return this.eventObj&&this.eventObj[t]},i.prototype.on=function(t,e){var r=this.eventObj||(this.eventObj={});return r[t]||(r[t]=[]),r[t].push(e),this};var c=function(t,r){return"string"==typeof t&&(t=e.select(t)),new i(t,r)};t.scroller=c,Object.defineProperty(t,"__esModule",{value:!0})});