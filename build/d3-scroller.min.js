(function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("d3-selection"),require("d3-drag"),require("d3-scale"),require("d3-transition")):"function"==typeof define&&define.amd?define(["exports","d3-selection","d3-drag","d3-scale","d3-transition"],e):e(t.d3=t.d3||{},t.d3,t.d3,t.d3,t.d3)})(this,function(t,e,r,n,i){"use strict";function a(t){return this.config=s,this.attr("selection",t),this}var o={mergeRecursive:function t(e,r){var n;for(n in r)e[n]instanceof Object?t(e[n],r[n]):e[n]=r[n]},isObject:function(t){return"object"==typeof t},clone:function(){return this.parentNode.appendChild(this.cloneNode(!0))},toPrecision:function(t,e){var r=Math.pow(10,e);return Math.round(t*r)/r}},s={animate:250,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,width:600,height:14,orientation:"horizontal",range:!1,step:50,value:0,values:null,handle:{x:70,width:40,minWidth:40},buttons:{width:14},bar:{margin:{left:5,right:5,top:0,bottom:0}},goti:{width:20,path:function(t,e){var r=t.attr("handle"),n=Math.min(t.attr("goti").width,r.minWidth),i=r.x+e/2,a=t.attr("height"),o=a/2,s="";return e<=n&&(i=r.x+r.minWidth/2),s+="M"+i+","+(o-a/4)+"L"+i+","+(o+a/4),s+="M"+(i-n/6)+","+(o-a/4)+"L"+(i-n/6)+","+(o+a/4),s+="M"+(i+n/6)+","+(o-a/4)+"L"+(i+n/6)+","+(o+a/4)}},margin:{left:0,right:0,top:0,bottom:0},change:null,slide:null,start:null,stop:null},l=o.toPrecision;a.prototype.attr=function(t,e){return void 0===e?this.config[t]:(this.config[t]=e,this)},a.prototype.drawSelf=function(t){function i(t){var e=s.attr("width")/2;return A(Math.max(k[0]+e,Math.min(t,k[1]-e))-e)}function a(t,e,r){x=t,s.transition().duration(!e&&m).tween("abc",function(){var t=+s.attr("width");return function(e){var n,a;r?(a=e<1?t+(r-t)*e:r,a=Math.max(a,b.minWidth),n+a>k[1]&&(a=k[1]-n),s.attr("width",l(a,1))):r=s.attr("width"),n=i(1!==e?v+e*(x-v):v=x),s.attr("x",l(c.attr("handle").x=n,1)),h.attr("d",c.attr("goti").path.call(h,c,l(r,1)))}})}var s,h,c=this,d=this.attr("selection"),u=this.attr("buttons"),p=this.attr("margin"),f=+this.attr("width")-p.left-p.right,g=this.attr("bar").margin,v=0,w=[1],m=this.attr("animate"),y=this.attr("height"),b=this.attr("handle"),x=b.x+b.width/2,k=[p.left+u.width+g.left,f-u.width-g.right],A=n.scaleLinear().domain(k).range(k),M=d.classed("slider",!0).attr("transform",this.attr("transform")),j=M.selectAll(".track").data(w),O=0;return j.enter().append("rect").attr("class","track").select(o.clone).attr("class","track-inset").select(o.clone).attr("class","track-overlay").call(r.drag().on("start.interrupt",function(){M.interrupt()}).on("start drag",function(){var t=A.invert(e.event.x),r=c.attr("handle");if("start"===e.event.type){if(c.start(),t>r.x&&t<r.x+r.width)return void(O=r.x+r.width/2-t);O=0}"start"===e.event.type&&(t<r.x||t>r.x+r.width)||c.emit("slide",t+O)}).on("end",c.stop)),M.selectAll(".track, .track-inset, .track-overlay").attr("x",A.range()[0]).attr("y",0).attr("width",A.range()[1]-A.range()[0]).attr("height",y),M.selectAll(".handle").data([1]).enter().insert("rect",".track-overlay").attr("class","handle"),s=M.selectAll(".handle").attr("width",b.width).attr("height",y).attr("x",u.width+g.left+p.left),h=M.selectAll(".goti"),h.data([1]).enter().insert("path",".track-overlay").classed("goti",!0).style("stroke","#000"),h=M.selectAll(".goti"),this.update=function(t,e,r,n){n&&(c.attr("handle").minWidth=n),a((t+e)/2,r,e-t),c.attr("handle").width=e-t,c.emit("change")},a(x,t),this},a.prototype.draw=function(t){return this.drawSelf(t).drawButtons(t)},a.prototype.drawButtons=function(t){var r,n=this,i=this.attr("selection"),a=this.attr("height"),o=this.attr("buttons").width,s=this.attr("width"),l=this.attr("margin"),h=l.left,c=this.attr("animate"),d=function(t,e){return"translate("+t+","+e+")"};return i.selectAll(".buttonGroup").data([1]).enter().append("g").classed("buttonGroup",!0).selectAll("g").data([0,1]).enter().append("g").attr("class",function(t,e){return e?"rightButton":"leftButton"}).on("click",function(t,e){n.start();var r=n.attr("handle"),i=r.x+(e?1:-1)*n.attr("step");n.emit("slide",i+r.width/2,n.end)}),i=i.selectAll(".buttonGroup g"),t&&(i=i.transition().duration(c)),i.attr("transform",function(t,e){return e?d(s-l.right-o,0):d(2*h,0)}).each(function(t,n){var i=e.select(this),s=i.selectAll("rect").data([1]);s.enter().append("rect").classed("bg",!0).merge(s).attr("x",-h).attr("y",0).attr("width",o).attr("height",a).attr("r",1),r=i.selectAll("path").data([1]),r.enter().append("path").classed("arrows",!0).merge(r).attr("d",function(){return"M"+((o-2*h)/2+(n?-1:1))+","+(a/2-3)+"L"+((o-2*h)/2+(n?-1:1))+","+(a/2+3)+"L"+((o-2*h)/2+(n?2:-2))+","+a/2+"Z"})}),this},a.prototype.destroy=function(){},a.prototype.disable=function(){},a.prototype.enable=function(){},a.prototype.option=function(){},a.prototype.change=function(){},a.prototype.create=function(){},a.prototype.slide=function(){},a.prototype.start=function(){},a.prototype.stop=function(){},a.prototype.emit=function(t,e,r){var n,i,a=this.getEvents(t)||[],o=this.attr("selection");for(n=0,i=a.length;n<i;n+=1)o.call(a[n],this,e);return r(),this},a.prototype.getEvents=function(t){return this.eventObj&&this.eventObj[t]},a.prototype.on=function(t,e){var r=this.eventObj||(this.eventObj={});return r[t]||(r[t]=[]),r[t].push(e),this};var h=function(t,r){return"string"==typeof t&&(t=e.select(t)),new a(t,r)};t.scroller=h,Object.defineProperty(t,"__esModule",{value:!0})});