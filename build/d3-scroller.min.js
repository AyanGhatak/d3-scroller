(function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("d3-selection"),require("d3-drag"),require("d3-scale"),require("d3-transition")):"function"==typeof define&&define.amd?define(["exports","d3-selection","d3-drag","d3-scale","d3-transition"],e):e(t.d3=t.d3||{},t.d3,t.d3,t.d3,t.d3)})(this,function(t,e,r,n){"use strict";function i(t){return this.config=s,this.attr("selection",t),this}var a,o={mergeRecursive:function d(t,e){var r;for(r in e)t[r]instanceof Object?d(t[r],e[r]):t[r]=e[r]},isObject:function(t){return"object"==typeof t},clone:function(){return this.parentNode.appendChild(this.cloneNode(!0))},toPrecision:function(t,e){var r=Math.pow(10,e);return Math.round(t*r)/r}},s={animate:250,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,width:600,height:14,orientation:"horizontal",range:!1,step:50,value:0,values:null,handle:{x:70,width:40,minWidth:40},buttons:{width:14},bar:{margin:{left:5,right:5,top:0,bottom:0}},goti:{width:20,path:function(t,e){var r=t.attr("handle"),n=Math.min(t.attr("goti").width,r.minWidth),i=r.x+e/2,a=t.attr("height"),o=a/2,s="";return n>=e&&(i=r.x+r.minWidth/2),s+="M"+i+","+(o-a/4)+"L"+i+","+(o+a/4),s+="M"+(i-n/6)+","+(o-a/4)+"L"+(i-n/6)+","+(o+a/4),s+="M"+(i+n/6)+","+(o-a/4)+"L"+(i+n/6)+","+(o+a/4)}},margin:{left:0,right:0,top:0,bottom:0},change:null,slide:null,start:null,stop:null},l=",",h=o.toPrecision;i.prototype.attr=function(t,e){return e===a?this.config[t]:(this.config[t]=e,this)},i.prototype.drawSelf=function(){function t(t){var e=a.attr("width")/2,r=k(Math.max(x[0]+e,Math.min(t,x[1]-e))-e);return r}function i(e,r,n){b=e,a.transition().duration(r?!1:v).tween("abc",function(){var e=+a.attr("width");return function(r){var i,o;n?(o=1>r?e+(n-e)*r:n,o=Math.max(o,m.minWidth),i+o>x[1]&&(o=x[1]-i),a.attr("width",h(o,1))):n=a.attr("width"),i=t(1!==r?g+r*(b-g):g=b),a.attr("x",h(l.attr("handle").x=i,1)),s.attr("d",l.attr("goti").path.call(s,l,h(n,1)))}})}var a,s,l=this,c=this.attr("selection"),d=this.attr("buttons"),u=this.attr("margin"),p=+this.attr("width")-u.left-u.right,f=this.attr("bar").margin,g=0,w=[1],v=this.attr("animate"),y=this.attr("height"),m=this.attr("handle"),b=m.x+m.width/2,x=[u.left+d.width+f.left,p-d.width-f.right],k=n.scaleLinear().domain(x).range(x),A=c.classed("slider",!0).attr("transform",this.attr("transform")),M=A.selectAll(".track").data(w),j=0;return M.enter().append("rect").attr("class","track").select(o.clone).attr("class","track-inset").select(o.clone).attr("class","track-overlay").call(r.drag().on("start.interrupt",function(){A.interrupt()}).on("start drag",function(){var t=k.invert(e.event.x),r=l.attr("handle");if("start"===e.event.type){if(t>r.x&&t<r.x+r.width)return void(j=r.x+r.width/2-t);j=0}"start"===e.event.type&&(t<r.x||t>r.x+r.width)||l.emit("slide",t+j)})),A.selectAll(".track, .track-inset, .track-overlay").attr("x",k.range()[0]).attr("y",0).attr("width",k.range()[1]-k.range()[0]).attr("height",y),A.selectAll(".handle").data([1]).enter().insert("rect",".track-overlay").attr("class","handle"),a=A.selectAll(".handle").attr("width",m.width).attr("height",y).attr("x",d.width+f.left+u.left),s=A.selectAll(".goti"),s.data([1]).enter().insert("path",".track-overlay").classed("goti",!0).style("stroke","#000"),s=A.selectAll(".goti"),this.update=function(t,e,r,n){n&&(l.attr("handle").minWidth=n),i((t+e)/2,r,e-t),l.attr("handle").width=e-t,l.emit("change")},i(b,!0),this},i.prototype.draw=function(){return this.drawSelf().drawButtons()},i.prototype.drawButtons=function(){var t,r=this,n=this.attr("selection"),i=this.attr("height"),a=this.attr("buttons").width,o=this.attr("width"),s=this.attr("margin"),h=s.left,c=function(t,e){return"translate("+t+l+e+")"};return n.selectAll(".buttonGroup").data([1]).enter().append("g").classed("buttonGroup",!0).selectAll("g").data([0,1]).enter().append("g").attr("class",function(t,e){return e?"rightButton":"leftButton"}).on("click",function(t,e){var n=r.attr("handle"),i=n.x+(e?1:-1)*r.attr("step");r.emit("slide",i+n.width/2)}),n.selectAll(".buttonGroup g").attr("transform",function(t,e){return e?c(o-s.right-a,0):c(2*h,0)}).each(function(r,n){var o=e.select(this),s=o.selectAll("rect").data([1]);s.enter().append("rect").classed("bg",!0).merge(s).attr("x",-h).attr("y",0).attr("width",a).attr("height",i).attr("r",1),t=o.selectAll("path").data([1]),t.enter().append("path").classed("arrows",!0).merge(t).attr("d",function(){return"M"+((a-2*h)/2+(n?-1:1))+l+(i/2-3)+"L"+((a-2*h)/2+(n?-1:1))+l+(i/2+3)+"L"+((a-2*h)/2+(n?2:-2))+l+i/2+"Z"})}),this},i.prototype.destroy=function(){},i.prototype.disable=function(){},i.prototype.enable=function(){},i.prototype.option=function(){},i.prototype.change=function(){},i.prototype.create=function(){},i.prototype.slide=function(){},i.prototype.start=function(){},i.prototype.stop=function(){},i.prototype.emit=function(t,e){var r,n,i=this.getEvents(t)||[],a=this.attr("selection");for(r=0,n=i.length;n>r;r+=1)a.call(i[r],this,e);return this},i.prototype.getEvents=function(t){return this.eventObj&&this.eventObj[t]},i.prototype.on=function(t,e){var r=this.eventObj||(this.eventObj={});return r[t]||(r[t]=[]),r[t].push(e),this};var c=function(t,r){return"string"==typeof t&&(t=e.select(t)),new i(t,r)};t.scroller=c,Object.defineProperty(t,"__esModule",{value:!0})});